# MAVLink-Router Configuration
# Routes MAVLink telemetry between autopilot, GCS, and offboard applications
#
# Documentation: https://github.com/mavlink-router/mavlink-router

[General]
# Enable TCP server for incoming connections
TcpServerPort = 5760

# Log level: error, warning, info, debug
DebugLogLevel = info

# Report statistics every N seconds (0 = disabled)
ReportStats = 0

# MAVLink dialect (common, ardupilotmega, etc.)
# MavlinkDialect = common

# ==============================================
# SITL Endpoint - PX4 Software Simulation
# ==============================================
# This endpoint receives MAVLink from PX4 SITL
# PX4 sends FROM port 14580 TO port 14540, so we listen on 14540
[UdpEndpoint sitl_in]
Mode = Server
Address = 0.0.0.0
Port = 14540

# ==============================================
# Serial Endpoint - Cube+ Orange Hardware (HITL)
# ==============================================
# Uncomment for HITL mode with physical hardware
# [UartEndpoint cube_orange]
# Device = /dev/ttyACM0
# Baud = 921600
# FlowControl = false

# ==============================================
# QGroundControl Endpoint
# ==============================================
# Forward telemetry to QGroundControl (Docker network IP)
[UdpEndpoint qgc]
Mode = Normal
Address = 172.28.0.20
Port = 14550

# ==============================================
# MAVSDK / Offboard API Endpoint (Control Container)
# ==============================================
# Forward telemetry to control container
[UdpEndpoint mavsdk_control]
Mode = Normal
Address = 172.28.0.30
Port = 14540

# ==============================================
# MAVSDK / Offboard API Endpoint (Test Runner)
# ==============================================
# Forward telemetry to test-runner container
[UdpEndpoint mavsdk_test]
Mode = Normal
Address = 172.28.0.100
Port = 14540

# ==============================================
# Broadcast Endpoint (Optional)
# ==============================================
# Broadcast to local network for auto-discovery
# [UdpEndpoint broadcast]
# Mode = Normal
# Address = 255.255.255.255
# Port = 14550

# ==============================================
# TCP Endpoint for Mission Planner (Optional)
# ==============================================
# Allows Mission Planner to connect via TCP
# [TcpEndpoint mission_planner]
# Address = 0.0.0.0
# Port = 5760

# ==============================================
# Message Filtering (Optional)
# ==============================================
# Filter out high-frequency messages to reduce bandwidth
# [MessageFilter]
# # Drop ATTITUDE messages (ID 30) with rate > 10 Hz
# Attitude = 10
# # Drop LOCAL_POSITION_NED (ID 32) with rate > 20 Hz
# LocalPositionNed = 20

